<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contagem de Produtos</title>
  <link rel="manifest" href="manifest.json">
  <style>
    :root {
      --bg-light: #f4f4f4;
      --bg-dark: #1e1e1e;
      --text-light: #fff;
      --text-dark: #333;
      --accent: #4caf50;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      background: var(--accent);
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 1.3rem;
    }

    main {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
    }

    section {
      display: none;
    }

    section.active {
      display: block;
    }

    label, input, select, textarea, button {
      display: block;
      width: 100%;
      margin-top: 10px;
      font-size: 1rem;
    }

    input, select, textarea {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    button {
      margin-top: 15px;
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
    }

    #vencimentos .vencimento-grupo {
      background: #fff;
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }

    .tabs {
      display: flex;
      justify-content: space-around;
      background: #eee;
      border-top: 1px solid #ccc;
    }

    .tab {
      flex: 1;
      text-align: center;
      padding: 0.8rem;
      cursor: pointer;
    }

    .tab.active {
      background: var(--accent);
      color: white;
    }

    .mensagem {
      white-space: pre-wrap;
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <header>Contagem de Produtos</header>

  <main>
    <section id="contagem" class="active">
      <label for="produto">Produto</label>
      <input type="text" id="produto">

      <label for="loja">Loja</label>
      <input type="text" id="loja">

      <div id="vencimentos"></div>
      <button onclick="adicionarVencimento()">Adicionar outra contagem</button>

      <label for="obs" style="margin-top: 20px;">Observa√ß√µes</label>
      <textarea id="obs"></textarea>

      <button onclick="gerarMensagem()">Gerar mensagem</button>

      <div id="mensagem" class="mensagem"></div>
      <button onclick="copiarMensagem()">Copiar mensagem</button>
    </section>

    <section id="historico">
      <p>Em breve: Hist√≥rico de contagens.</p>
    </section>

    <section id="config">
      <p>Em breve: Configura√ß√µes e prefer√™ncias.</p>
    </section>
  </main>

  <div class="tabs">
    <div class="tab active" onclick="mostrarAba('contagem')">üìã Contagem</div>
    <div class="tab" onclick="mostrarAba('historico')">üìä Hist√≥rico</div>
    <div class="tab" onclick="mostrarAba('config')">‚öôÔ∏è Config</div>
  </div>

  <script>
    function mostrarAba(id) {
      document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
      document.querySelector(`#${id}`).classList.add('active');
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelector(`.tab[onclick*='${id}']`).classList.add('active');
    }

    function adicionarVencimento() {
      const container = document.getElementById('vencimentos');
      const grupo = document.createElement('div');
      grupo.className = 'vencimento-grupo';
      grupo.innerHTML = `
        <input type="number" placeholder="Quantidade">
        <input type="text" placeholder="Data de vencimento (dd/mm/aaaa)" pattern="\\d{2}/\\d{2}/\\d{4}">
        <select>
          <option value="√Årea de vendas">√Årea de vendas</option>
          <option value="Estoque">Estoque</option>
        </select>
      `;
      container.appendChild(grupo);
    }

    function gerarMensagem() {
      const produto = document.getElementById('produto').value;
      const loja = document.getElementById('loja').value;
      const obs = document.getElementById('obs').value;
      const grupos = document.querySelectorAll('.vencimento-grupo');

      let msg = `üì¶ Produto: ${produto}\n\n`;
      msg += `üè¨ Loja: ${loja}\n\n`;
      msg += `üìÜ Contagem por vencimento:\n`;

      grupos.forEach(grupo => {
        const inputs = grupo.querySelectorAll('input, select');
        const qtd = inputs[0].value;
        const venc = inputs[1].value;
        const local = inputs[2].value;
        if (qtd && venc && local) {
          msg += `‚Ä¢ ${qtd} unidades (${local}) - ${venc}\n`;
        }
      });

      if (obs) msg += `\nüìù Obs: ${obs}`;

      document.getElementById('mensagem').textContent = msg;
    }

    function copiarMensagem() {
      const texto = document.getElementById('mensagem').textContent;
      navigator.clipboard.writeText(texto).then(() => alert('Mensagem copiada!'));
    }

    adicionarVencimento();
  </script>
</body>
</html>
